[global]
time_based=1
startdelay=5
exitall_on_error=1
create_serialize=0
directory=/mnt/weka/fio
group_reporting=1
clocksource=gettimeofday
runtime=300
ioengine=posixaio
disk_util=0
iodepth=1

[create_iops_files]
rw=rw
rwmixread=0
bs=1m
filesize=4G
numjobs=192
filename_format=$jobnum/$filenum/iops.$jobnum.$filenum
create_only=1
new_group

[create_bw_files]
wait_for=create_iops_files
rw=rw
rwmixread=0
bs=1m
filesize=128G
numjobs=32
filename_format=$jobnum/$filenum/bw.$jobnum.$filenum
create_only=1
new_group

[read_throughput]
wait_for=create_bw_files
numjobs=32
bs=1m
rw=read
direct=1
filename_format=$jobnum/$filenum/bw.$jobnum.$filenum
filesize=128G
allow_file_create=0
new_group

[write_throughput]
wait_for=read_throughput
numjobs=32
bs=1m
rw=write
direct=1
filename_format=$jobnum/$filenum/bw.$jobnum.$filenum
filesize=128G
allow_file_create=0
new_group

[read_iops]
wait_for=write_throughput
numjobs=192
bs=4k
rw=randread
direct=1
filename_format=$jobnum/$filenum/iops.$jobnum.$filenum
filesize=4G
allow_file_create=0
new_group

[write_iops]
wait_for=read_iops
numjobs=192
bs=4k
rw=randwrite
direct=1
filename_format=$jobnum/$filenum/iops.$jobnum.$filenum
filesize=4G
allow_file_create=0
new_group

[read_latency]
wait_for=write_iops
numjobs=1
bs=4k
rw=randread
direct=1
filename_format=$jobnum/$filenum/iops.$jobnum.$filenum
filesize=4G
allow_file_create=0
new_group

[write_latency]
wait_for=read_latency
numjobs=1
bs=4k
rw=randwrite
direct=1
filename_format=$jobnum/$filenum/iops.$jobnum.$filenum
filesize=4G
allow_file_create=0
new_group
